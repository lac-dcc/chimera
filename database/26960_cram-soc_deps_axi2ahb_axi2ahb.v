// This program was cloned from: https://github.com/buncram/cram-soc
// License: CERN Open Hardware Licence Version 2 - Weakly Reciprocal

//------------------------------------------------------------------
//-- File generated by RobustVerilog parser
//-- RobustVerilog version 1.2 (limited free version)
//-- Invoked Mon Feb 06 01:29:27 2023
//-- Source file: axi2ahb.v
//-- Parent file: None
//-- Run directory: F:/largework/rust-win/code/robust_axi2ahb/
//-- Target directory: out/
//-- Command flags: .\src\base\axi2ahb.v -od out -I .\src\gen\ -list list.txt -listpath -header
//-- www.provartec.com/edatools ... info@provartec.com
//------------------------------------------------------------------






module axi2ahb (clk,
                reset,
                AWID,
                AWADDR,
                AWLEN,
                AWSIZE,
                AWVALID,
                AWREADY,
                WID,
                WDATA,
                WSTRB,
                WLAST,
                WVALID,
                WREADY,
                BID,
                BRESP,
                BVALID,
                BREADY,
                ARID,
                ARADDR,
                ARLEN,
                ARSIZE,
                ARVALID,
                ARREADY,
                RID,
                RDATA,
                RRESP,
                RLAST,
                RVALID,
                RREADY,
                HADDR,
                HBURST,
                HSIZE,
                HTRANS,
                HWRITE,
                HWDATA,
                HRDATA,
                HREADY,
                HRESP);

    input              clk;
    input              reset;

    input [3:0]        AWID;
    input [23:0]       AWADDR;
    input [3:0]        AWLEN;
    input [1:0]        AWSIZE;
    input              AWVALID;
    output             AWREADY;
    input [3:0]        WID;
    input [31:0]       WDATA;
    input [32/8-1:0]   WSTRB;
    input              WLAST;
    input              WVALID;
    output             WREADY;
    output [3:0]       BID;
    output [1:0]       BRESP;
    output             BVALID;
    input              BREADY;
    input [3:0]        ARID;
    input [23:0]       ARADDR;
    input [3:0]        ARLEN;
    input [1:0]        ARSIZE;
    input              ARVALID;
    output             ARREADY;
    output [3:0]       RID;
    output [31:0]      RDATA;
    output [1:0]       RRESP;
    output             RLAST;
    output             RVALID;
    input              RREADY;

    output [23:0]      HADDR;
    output [2:0]       HBURST;
    output [1:0]       HSIZE;
    output [1:0]       HTRANS;
    output             HWRITE;
    output [31:0]      HWDATA;
    input [31:0]       HRDATA;
    input              HREADY;
    input              HRESP;


    //outputs of cmd
    wire                   cmd_empty;
    wire                   cmd_read;
    wire [4-1:0]     cmd_id;
    wire [24-1:0]   cmd_addr;
    wire [3:0]             cmd_len;
    wire [1:0]             cmd_size;
    wire                   cmd_err;

    //outputs of ctrl
    wire                   ahb_finish;
    wire                   data_last;

    //outputs of wr fifo
    wire                   wdata_phase;
    wire                   wdata_ready;

    //outputs of rd fifo
    wire                   rdata_phase;
    wire                   rdata_ready;



    axi2ahb_cmd axi2ahb_cmd(
      .clk(clk),
      .reset(reset),
      .AWID(AWID),
      .AWADDR(AWADDR),
      .AWLEN(AWLEN),
      .AWSIZE(AWSIZE),
      .AWVALID(AWVALID),
      .AWREADY(AWREADY),
      .ARID(ARID),
      .ARADDR(ARADDR),
      .ARLEN(ARLEN),
      .ARSIZE(ARSIZE),
      .ARVALID(ARVALID),
      .ARREADY(ARREADY),
      .HADDR(HADDR),
      .HBURST(HBURST),
      .HSIZE(HSIZE),
      .HTRANS(HTRANS),
      .HWRITE(HWRITE),
      .HWDATA(HWDATA),
      .HRDATA(HRDATA),
      .HREADY(HREADY),
      .HRESP(HRESP),
      .ahb_finish(ahb_finish),
      .cmd_empty(cmd_empty),
      .cmd_read(cmd_read),
      .cmd_id(cmd_id),
      .cmd_addr(cmd_addr),
      .cmd_len(cmd_len),
      .cmd_size(cmd_size),
      .cmd_err(cmd_err)
    );



    axi2ahb_ctrl axi2ahb_ctrl(
      .clk(clk),
      .reset(reset),
      .HADDR(HADDR),
      .HBURST(HBURST),
      .HSIZE(HSIZE),
      .HTRANS(HTRANS),
      .HWRITE(HWRITE),
      .HWDATA(HWDATA),
      .HRDATA(HRDATA),
      .HREADY(HREADY),
      .HRESP(HRESP),
      .ahb_finish(ahb_finish),
      .rdata_phase(rdata_phase),
      .wdata_phase(wdata_phase),
      .data_last(data_last),
      .rdata_ready(rdata_ready),
      .wdata_ready(wdata_ready),
      .cmd_empty(cmd_empty),
      .cmd_read(cmd_read),
      .cmd_addr(cmd_addr),
      .cmd_len(cmd_len),
      .cmd_size(cmd_size)
    );


    axi2ahb_wr_fifo
    axi2ahb_wr_fifo(
      .clk(clk),
      .reset(reset),
      .WID(WID),
      .WDATA(WDATA),
      .WSTRB(WSTRB),
      .WLAST(WLAST),
      .WVALID(WVALID),
      .WREADY(WREADY),
      .BID(BID),
      .BRESP(BRESP),
      .BVALID(BVALID),
      .BREADY(BREADY),
      .HWDATA(HWDATA),
      .HREADY(HREADY),
      .HTRANS(HTRANS),
      .HRESP(HRESP),
      .cmd_err(cmd_err),
      .wdata_phase(wdata_phase),
      .wdata_ready(wdata_ready),
      .data_last(data_last)
    );


    axi2ahb_rd_fifo
    axi2ahb_rd_fifo(
      .clk(clk),
      .reset(reset),
      .RID(RID),
      .RDATA(RDATA),
      .RRESP(RRESP),
      .RLAST(RLAST),
      .RVALID(RVALID),
      .RREADY(RREADY),
      .HRDATA(HRDATA),
      .HREADY(HREADY),
      .HTRANS(HTRANS),
      .HRESP(HRESP),
      .cmd_id(cmd_id),
      .cmd_err(cmd_err),
      .rdata_phase(rdata_phase),
      .rdata_ready(rdata_ready),
      .data_last(data_last)
    );


endmodule




